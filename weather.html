<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="description"
    content="Weather details – current conditions, temperature, and weather alerts for any city or postcode.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safe Weather – Weather details for your location</title>
  <link rel="icon" href="https://github.com/LHcode2025/test/raw/main/SafeWeatherLogo.png" type="image/png"
    sizes="32x32">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

  <link rel="stylesheet" href="assets/css/style.css">

  <!-- Leaflet CSS for interactive map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
</head>

<body>
  <header class="py-3">
    <div class="container align-content-md-start">
      <a href="index.html" aria-label="Back to home page"><i class="bi bi-chevron-left"></i></a>
      <h1 class="visually-hidden">Weather information for my location</h1>
    </div>
  </header>

  <main class="container py-4">
    <!-- Loading State (visible by default) -->
    <div id="loading-state" class="text-center py-5">
      <div class="loading-spinner mb-3"></div>
      <p class="text-white-50">Getting real time weather data...</p>
    </div>

    <!-- Error State (hidden by default) -->
    <div id="error-state" class="d-none text-center py-5">
      <div class="mb-3">
        <i class="bi bi-exclamation-triangle error-icon"></i>
      </div>
      <h3 class="text-white mb-3">Unable to Load Weather Data</h3>
      <p class="text-white-50 mb-3" id="error-message">There was a problem fetching the weather data. Please try again
        later.</p>
      <a href="index.html" class="btn btn-primary">Back to Home</a>
    </div>

    <!-- All weather content (hidden by default to prevent FOUT/FLOUT) -->
    <div id="weather-content" class="d-none">

      <!-- Main Weather Grid: 2 columns on desktop, stacked on mobile -->
      <div class="row g-3 py-5 mb-3">
        <!-- Left Column: Time, Location Name, Rain Coverage -->
        <div class="col-12 col-lg-6 d-flex flex-column order-1 order-lg-1 mt-4">
          <!-- Time -->
          <div class="time-box m-0">
            <div id="dateTime"></div>
          </div>

          <!-- Location Name -->
          <div class="location-name p-0 m-0">
            <div id="location-name"></div>
          </div>

          <!-- Rain Coverage % -->
          <div class="rain-coverage-box p-0 m-0">
            <div>Rain Coverage: <span class="rain-coverage-value"></span>%</div>
          </div>
        </div>

        <div
          class="col-12 col-lg-6 d-flex flex-column flex-lg-row align-items-center align-items-lg-start justify-content-center justify-content-lg-end right-col order-3 order-lg-2 mt-0">
          <!-- Degrees °C -->
          <div
            class="degrees-box pe-lg-4 mb-3 pt-0 order-2 order-lg-1 position-relative d-flex justify-content-center justify-content-lg-end align-items-start ms-lg-auto mt-5">
            <div id="temp" class="text-center text-lg-end" data-label data-units="°C"></div>
          </div>

          <!-- Weather Icon (larger) -->
          <div
            class="weather-icon-box order-1 order-lg-2 d-flex justify-content-center justify-content-lg-end align-items-center p-xs-3">
            <span id="weather-icon-box"></span>
          </div>
        </div>

      </div>

      <!-- Weather Details Grid: 2x2 on mobile, 4 across on desktop -->
      <h2 class="visually-hidden">Current Weather Details</h2>
      <div class="row g-3 mb-4">
        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">Air Pollution</span>
              <span class="data-value" id="aqi"></span>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <div id="humidity" data-label="Humidity" data-units="%"></div>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span id="wind_speed" data-label="Wind speed" data-units=" km/h"></span>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">UV Index</span>
              <span class="data-value" id="uvi"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Recommendations Grid: 2x2 on mobile, 4 across on desktop -->
      <h2 class="visually-hidden">Weather Recommendations</h2>
      <div class="row g-3 mb-4">
        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">Wear a coat?</span>
              <span class="data-value" id="coat"></span>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">Bring an Umbrella?</span>
              <span class="data-value" id="umbrella"></span>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">Is the sun safe?</span>
              <span class="data-value" id="sun"></span>
            </div>
          </div>
        </div>

        <div class="col-6 col-lg-3">
          <div class="card bg-dark text-white border-0 h-100">
            <div class="card-body text-left ps-4">
              <span class="data-label">Is the Air Safe?</span>
              <span class="data-value" id="air"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Interactive Map -->
      <h2 class="visually-hidden">Interactive Weather Map</h2>
      <div id="interactive-map" class="mb-4"></div>

      <!-- 7-Day Forecast Section -->
      <h2 id="forecast-label" class="text-white text-center mb-3">Forecast</h3>
        <div id="forecast" class="mb-4">
          <!-- Cards injected here -->
        </div>

    </div> <!-- Close weather-content -->
  </main>

  <button id="scrollToTop" class="btn btn-secondary position-fixed bottom-0 end-0 m-3 rounded-circle"
    onclick="scrollToTop()" aria-label="Scroll to top">
    <i class="bi bi-arrow-up"></i>
  </button>

  <footer id="weather-footer" class="d-none mt-5 py-4 text-center">
    <div class="container">
      <p class="mb-1 text-white-50">&copy; 2025 Safe Weather</p>
      <p class="mb-0 small text-white-50">Weather data provided by <a href="https://openweathermap.org/" target="_blank"
          rel="noopener noreferrer" class="text-decoration-underline">OpenWeatherMap</a></p>
    </div>
    <div class="d-flex justify-content-center align-items-center gap-3 mt-3">
      <a href="index.html" aria-label="Safe Weather home">
        <img src="assets/images/SafeWeatherLogo.svg" height="32" width="32" alt="Safe Weather Logo" class="footer-logo">
      </a>
      <a href="https://github.com/niraj-sachania/safeweather" target="_blank" rel="noopener noreferrer"
        aria-label="View project on GitHub">
        <i class="bi bi-github"></i>
      </a>
    </div>
  </footer>

  <!-- Load weather data module first -->
  <script type="module" src="assets/js/weather-data.js"></script>

  <!-- Leaflet JS library -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- Initialise interactive map -->
  <script type="module" src="assets/js/map-init.js"></script>

  <!-- Weather page scripts -->
  <script src="assets/js/weather-page.js"></script>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>

</body>

</html>